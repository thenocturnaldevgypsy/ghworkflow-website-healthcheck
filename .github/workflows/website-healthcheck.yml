name: Website Health Check

on:
  schedule:
    - cron: '*/30 * * * *'  # Runs every 30 minutes

jobs:
  check-websites:
    runs-on: ubuntu-latest

    steps:
    - name: Check Website Status
      run: |
        websites=(
          "https://thenocturnaldevgyspy.vercel.app"
          "https://beacons.ai/thenocturnaldevgyspsy"
        )

        for website in "${websites[@]}"
        do
          response=$(curl --write-out "%{http_code}" --silent --output /dev/null "$website")
          if [[ "$response" -eq 200 ]]; then
            status="✅ UP"
          else
            status="❌ DOWN"
          fi
          timestamp=$(date -u +"%Y-%m-%d %H:%M:%S UTC")
          
          # Update README.md
          sed -i '' "/$website/,+3d" README.md
          echo -e "\nWebsite: $website\n- Status: $status\n- Checked at: $timestamp" >> README.md
        done
